<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Seata</title>
      <link href="2021/07/18/seata/"/>
      <url>2021/07/18/seata/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sentinel</title>
      <link href="2021/07/18/sentinel/"/>
      <url>2021/07/18/sentinel/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nacos</title>
      <link href="2021/07/18/nacos/"/>
      <url>2021/07/18/nacos/</url>
      
        <content type="html"><![CDATA[<h3 id="Nacos介绍"><a href="#Nacos介绍" class="headerlink" title="Nacos介绍"></a>Nacos介绍</h3><p><a href="https://nacos.io/zh-cn/">Nacos官网</a></p><p>Nacos主要集成了Spring Cloud的<strong>服务注册发现</strong>与<strong>服务配置</strong>的功能，并提供了可视化的后台界面，方便开发者进行微服务应用的开发。</p><h3 id="Nacos安装及运行"><a href="#Nacos安装及运行" class="headerlink" title="Nacos安装及运行"></a>Nacos安装及运行</h3><ol><li>进入<a href="https://github.com/alibaba/nacos/releases/download/2.0.2/nacos-server-2.0.2.zip">Nacos下载地址</a>，Nacos 的版本为2.0.2</li><li>解压 nacos-server-2.0.2.zip 至文件夹</li><li>打开控制台在bin文件夹下运行命令<code>startup.cmd -m standalone</code> </li></ol><p><img src="/2021/07/18/nacos/image-20210718124603845.png"></p><ol start="4"><li>访问 <a href="http://192.168.0.102:8848/nacos/index.html">Nacos后台</a> ，输入账号nacos，密码nacos，进入到nacos后台</li></ol><p><img src="/2021/07/18/nacos/image-20210718124756759.png"></p><ol start="5"><li>至此Nacos的安装和单体运行完成</li></ol><h3 id="Nacos服务注册与发现"><a href="#Nacos服务注册与发现" class="headerlink" title="Nacos服务注册与发现"></a>Nacos服务注册与发现</h3><h4 id="导入Nacos服务注册与发现依赖"><a href="#导入Nacos服务注册与发现依赖" class="headerlink" title="导入Nacos服务注册与发现依赖"></a>导入Nacos服务注册与发现依赖</h4><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="服务提供者"><a href="#服务提供者" class="headerlink" title="服务提供者"></a>服务提供者</h4><ol><li><p>YAML文件配置</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#服务端口</span><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9001</span><span class="token key atrule">spring</span><span class="token punctuation">:</span><span class="token comment">#服务名称</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> nacos<span class="token punctuation">-</span>payment<span class="token punctuation">-</span>provider<span class="token comment">#注册中心地址</span>  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#通过HTTP公开所有端点 -- actuator相关</span><span class="token key atrule">management</span><span class="token punctuation">:</span>  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>    <span class="token key atrule">web</span><span class="token punctuation">:</span>      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">'*'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>主启动类（Main文件）</p><p><strong>添加注解</strong>：<code>@EnableDiscoveryClient</code></p></li><li><p>业务逻辑代码</p></li></ol><h4 id="服务消费者"><a href="#服务消费者" class="headerlink" title="服务消费者"></a>服务消费者</h4><ol><li><p>YAML配置文件</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#服务端口</span><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">83</span><span class="token key atrule">spring</span><span class="token punctuation">:</span><span class="token comment">#服务名称</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> nacos<span class="token punctuation">-</span>order<span class="token punctuation">-</span>consumer<span class="token comment">#注册中心地址    </span>  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>主启动类（Main文件）</p><p><strong>添加注解</strong>：<code>@EnableDiscoveryClient</code></p></li><li><p>业务逻辑代码</p><p><strong>服务提供者的地址为<code>http://nacos-payment-provider</code></strong></p><p><strong>消费者借助RestTemplate调用服务提供者的对应路由来调用服务提供者的服务</strong></p></li></ol><p><strong>PS：Nacos自带Ribbon负载均衡，同时支持AP和CP模式的切换</strong></p><h3 id="Nacos服务配置"><a href="#Nacos服务配置" class="headerlink" title="Nacos服务配置"></a>Nacos服务配置</h3><h4 id="配置文件的加载顺序"><a href="#配置文件的加载顺序" class="headerlink" title="配置文件的加载顺序"></a>配置文件的加载顺序</h4><blockquote><p>bootstrap的优先加载于application，默认情况下bootstrap的配置不会被application中的配置覆盖。</p></blockquote><p><strong>如果需要覆盖配置，则需要添加如下配置</strong></p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">spring</span><span class="token punctuation">:</span><span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">config</span><span class="token punctuation">:</span>  <span class="token key atrule">allow-override</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>使用bootstrap用于加载配置中心的配置文件</strong></p><h4 id="Nacos新建配置文件"><a href="#Nacos新建配置文件" class="headerlink" title="Nacos新建配置文件"></a>Nacos新建配置文件</h4><ol><li>新建配置文件</li></ol><p><img src="/2021/07/18/nacos/image-20210729205639349.png"></p><ol start="2"><li>输入配置信息</li></ol><p><img src="/2021/07/18/nacos/image-20210729205744635.png"></p><ol start="3"><li>发布配置文件</li></ol><p><img src="/2021/07/18/nacos/image-20210729205956558.png"></p><h4 id="配置文件加载实现"><a href="#配置文件加载实现" class="headerlink" title="配置文件加载实现"></a>配置文件加载实现</h4><ol><li>导入依赖</li></ol><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>YAML配置</li></ol><h6 id="bootstrap-yaml"><a href="#bootstrap-yaml" class="headerlink" title="bootstrap.yaml"></a>bootstrap.yaml</h6><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> nacos<span class="token punctuation">-</span>config<span class="token punctuation">-</span>client  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#Nacos服务注册中心地址</span>      <span class="token key atrule">config</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#Nacos作为配置中心地址</span>        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yaml <span class="token comment">#指定yaml格式的配置</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h6 id="application-yaml"><a href="#application-yaml" class="headerlink" title="application.yaml"></a>application.yaml</h6><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#加载的配置文件的环境</span><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>    <span class="token key atrule">active</span><span class="token punctuation">:</span> test <span class="token comment"># 表示测试环境</span>    <span class="token comment">#服务端口号</span><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3377</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>主启动类</li></ol><p><code>添加@EnableDiscoveryClient注解</code></p><p><strong>主要是针对服务注册与发现的注解</strong></p><ol start="4"><li>业务逻辑代码</li></ol><p><code>添加@RefreshScope注解用于动态刷新配置文件的内容</code></p><h4 id="配置文件的命名规则"><a href="#配置文件的命名规则" class="headerlink" title="配置文件的命名规则"></a>配置文件的命名规则</h4><blockquote><p>${spring.application.name} + ‘-‘ + ${spring.profiles.active} + ‘.’ + ${spring.cloud.nacos.config.file-extension}</p></blockquote><p><strong>如应用名称为nacos-order-consumer，profile.active为dev，配置文件类型为yaml，则nacos的配置文件命名为nacos-order-consumer-dev.yaml</strong></p><h4 id="分组与命名空间"><a href="#分组与命名空间" class="headerlink" title="分组与命名空间"></a>分组与命名空间</h4><h5 id="新建命名空间"><a href="#新建命名空间" class="headerlink" title="新建命名空间"></a>新建命名空间</h5><p><img src="/2021/07/18/nacos/20211016143444.png"></p><h5 id="切换分组"><a href="#切换分组" class="headerlink" title="切换分组"></a>切换分组</h5><p><img src="/2021/07/18/nacos/20211016143608485.png"></p><p><strong>输入所需的分组即可切换分组</strong></p><h5 id="YAML配置"><a href="#YAML配置" class="headerlink" title="YAML配置"></a>YAML配置</h5><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> nacos<span class="token punctuation">-</span>config<span class="token punctuation">-</span>client  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#Nacos服务注册中心地址</span>      <span class="token key atrule">config</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#Nacos作为配置中心地址</span>        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yaml <span class="token comment">#指定yaml格式的配置</span>        <span class="token key atrule">group</span><span class="token punctuation">:</span> GROUP_1 <span class="token comment"># 指定group id</span>        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ef147af1<span class="token punctuation">-</span>4688<span class="token punctuation">-</span>4708<span class="token punctuation">-</span>8a12<span class="token punctuation">-</span>d84eb7dcad6f <span class="token comment"># 指定命名空间</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>这里的主要是在配置文件添加config.group 和 config.namespace两个属性的值来指定分组和命名空间</strong></p><h3 id="Nacos集群和持久化"><a href="#Nacos集群和持久化" class="headerlink" title="Nacos集群和持久化"></a>Nacos集群和持久化</h3>]]></content>
      
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringCloud</title>
      <link href="2021/07/18/springcloud/"/>
      <url>2021/07/18/springcloud/</url>
      
        <content type="html"><![CDATA[<p><strong>主要记录Spring Cloud Alibaba的学习</strong></p><p><a href="https://spring-cloud-alibaba-group.github.io/github-pages/hoxton/en-us/index.html">Spring Cloud Alibaba官方文档</a></p><p><strong>Spring Cloud Alibaba使用需要在父pom文件中导入依赖</strong></p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.0.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><a href="https://w58296.github.io/2021/07/18/nacos/">Nacos</a></li><li><a href="https://w58296.github.io/2021/07/18/sentinel/">Sentinel</a></li><li><a href="https://w58296.github.io/2021/07/18/seata/">Seata</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="2020/12/05/hello-world/"/>
      <url>2020/12/05/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
